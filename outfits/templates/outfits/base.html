{% load static %}
{% load humanize %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MindVibe - Find and rent the perfect outfit for your style.">
    <title>{% block title %}MindVibe{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'outfits/styles.css' %}">
    {% block extra_head %}{% endblock %}
</head>
<body>
    <header class="site-header">
        <div class="header-inner container">
            <a href="{% url 'outfits:home' %}" class="logo">MindVibe</a>
            <nav class="main-nav">
                <a href="{% url 'outfits:home' %}" class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}">Home</a>
                <a href="{% url 'outfits:outfit-list' %}" class="nav-link {% if request.resolver_match.url_name == 'outfit-list' or request.resolver_match.url_name == 'outfits-by-category' %}active{% endif %}">All Outfits</a>
                <a href="{% url 'outfits:cart_detail' %}" class="nav-link cart-link {% if request.resolver_match.url_name == 'cart_detail' %}active{% endif %}" title="Shopping Cart">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="nav-icon cart-icon">
                      <path fill-rule="evenodd" d="M7.5 6v.75H5.513c-.96 0-1.764.724-1.865 1.679l-1.263 12A1.875 1.875 0 0 0 4.25 22.5h15.5a1.875 1.875 0 0 0 1.865-2.071l-1.263-12a1.875 1.875 0 0 0-1.865-1.679H16.5V6a4.5 4.5 0 1 0-9 0ZM12 3a3 3 0 0 0-3 3v.75h6V6a3 3 0 0 0-3-3Zm-3 8.25a3 3 0 1 0 6 0v-.75a.75.75 0 0 1 1.5 0v.75a4.5 4.5 0 1 1-9 0v-.75a.75.75 0 0 1 1.5 0v.75Z" clip-rule="evenodd" />
                    </svg>
                    {% if cart_item_count > 0 %}
                        <span class="cart-badge">{{ cart_item_count }}</span>
                    {% endif %}
                </a>
                {% if user.is_authenticated %}
                    <a href="{% url 'outfits:order_history' %}" class="nav-link {% if request.resolver_match.url_name == 'order_history' %}active{% endif %}">Order History</a>
                    <a href="{% url 'outfits:user_profile' %}" class="nav-link user-greeting {% if request.resolver_match.url_name == 'user_profile' %}active{% endif %}" title="My Profile">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="nav-icon user-icon">
                          <path fill-rule="evenodd" d="M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" clip-rule="evenodd" />
                        </svg>
                        <span class="user-nav-name">{{ user.first_name|default:user.username }}</span>
                    </a>
                    <form action="{% url 'logout' %}" method="post" class="logout-form">
                        {% csrf_token %}
                        <button type="submit" class="button link-button" title="Logout">Logout</button>
                    </form>
                {% else %}
                    <a href="{% url 'login' %}" class="nav-link auth-link">Login</a>
                    <a href="{% url 'outfits:register' %}" class="nav-link auth-link">Sign Up</a>
                {% endif %}
            </nav>
        </div>
    </header>

    {% if messages %}
        <div class="messages-container container" style="padding-top: 15px;">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}" role="alert">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <main class="container main-content">
        {% block content %}
        {% endblock %}
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>&copy; {% now "Y" %} MindVibe. All rights reserved.</p>
        </div>
    </footer>

    {% block extra_js %}{% endblock %}
</body>
</html>