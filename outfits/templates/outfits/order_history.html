{# outfits/templates/outfits/order_history.html #}
{% extends 'outfits/base.html' %}
{% load humanize %}

{% block title %}ประวัติการเช่า - MindVibe{% endblock %}

{% block content %}
  <h2>ประวัติการเช่าของคุณ</h2>

  {% if orders %}
    <table class="order-history-table" style="width:100%; border-collapse: collapse; margin-top: 15px;">
      <thead>
        <tr style="border-bottom: 2px solid #ccc;">
          <th style="text-align: left; padding: 8px;">เลขที่คำสั่งเช่า</th>
          <th style="text-align: left; padding: 8px;">วันที่สั่ง</th>
          <th style="text-align: right; padding: 8px;">ยอดรวม</th>
          <th style="text-align: center; padding: 8px;">สถานะ</th>
          <th style="text-align: center; padding: 8px;">ดูรายละเอียด</th>
        </tr>
      </thead>
      <tbody>
        {% for order in orders %}
          <tr style="border-bottom: 1px solid #eee;">
            <td style="padding: 8px;">#{{ order.id }}</td>
            <td style="padding: 8px;">{{ order.created_at|date:"d/m/Y H:i" }}</td>
            <td style="text-align: right; padding: 8px;">{{ order.total_amount|floatformat:2|intcomma }} บาท</td>
            <td style="text-align: center; padding: 8px;">{{ order.get_status_display }}</td> {# ใช้ get_status_display เพื่อแสดงชื่อสถานะภาษาไทย #}
            <td style="text-align: center; padding: 8px;">
              <a href="{% url 'outfits:order_detail' order.id %}" class="button secondary-button tiny-button">ดูรายละเอียด</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p style="margin-top: 20px;">คุณยังไม่มีประวัติการเช่า</p>
    <a href="{% url 'outfits:outfit-list' %}" class="button primary-button">เลือกดูชุด</a>
  {% endif %}

{% endblock %}