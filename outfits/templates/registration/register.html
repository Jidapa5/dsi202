{% extends 'outfits/base.html' %}

{% block title %}เข้าสู่ระบบ - MindVibe{% endblock %}

{% block content %}
<div class="max-w-md mx-auto mt-10 bg-white p-8 rounded-2xl shadow-lg">
  <h2 class="text-2xl font-bold text-center text-pink-600 mb-6">เข้าสู่ระบบ</h2>

  {% if form.errors %}
    <div class="bg-red-100 text-red-700 p-3 rounded mb-4">
      <p>ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง กรุณาลองอีกครั้ง</p>
    </div>
  {% endif %}

  {% if next %}
    {% if user.is_authenticated %}
      <p class="text-sm text-yellow-600 mb-4">คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กรุณาเข้าสู่ระบบด้วยบัญชีที่มีสิทธิ์</p>
    {% else %}
      <p class="text-sm text-gray-600 mb-4">กรุณาเข้าสู่ระบบเพื่อดูหน้านี้</p>
    {% endif %}
  {% endif %}

  <form method="post" action="{% url 'login' %}" class="space-y-4">
    {% csrf_token %}
    
    <div>
      {{ form.username.label_tag }}
      {{ form.username }}
    </div>

    <div>
      {{ form.password.label_tag }}
      {{ form.password }}
    </div>

    <input type="hidden" name="next" value="{{ next }}">

    <button type="submit" class="w-full bg-pink-600 text-white py-2 rounded hover:bg-pink-700 transition">
      เข้าสู่ระบบ
    </button>
  </form>

  <div class="text-center mt-4 text-sm text-gray-600">
    <p><a href="{% url 'password_reset' %}" class="text-pink-600 hover:underline">ลืมรหัสผ่าน?</a></p>
    <p class="mt-2">ยังไม่มีบัญชี? <a href="{% url 'outfits:register' %}" class="text-pink-600 hover:underline">สมัครสมาชิกที่นี่</a></p>
  </div>
</div>
{% endblock %}
