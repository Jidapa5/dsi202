{# templates/registration/login.html #}
{% extends 'outfits/base.html' %} {# หรือ base template ของคุณ #}

{% block title %}เข้าสู่ระบบ - MindVibe{% endblock %}

{% block content %}
  <h2>เข้าสู่ระบบ</h2>

  {# แสดงข้อผิดพลาดของฟอร์ม ถ้ามี #}
  {% if form.errors %}
    <p style="color: red;">ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง กรุณาลองอีกครั้ง</p>
  {% endif %}

  {# แสดงข้อความ ถ้าถูก redirect มาเพราะต้อง login ก่อน #}
  {% if next %}
    {% if user.is_authenticated %}
      <p>คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กรุณาเข้าสู่ระบบด้วยบัญชีที่มีสิทธิ์</p>
    {% else %}
      <p>กรุณาเข้าสู่ระบบเพื่อดูหน้านี้</p>
    {% endif %}
  {% endif %}

  <form method="post" action="{% url 'login' %}">
    {% csrf_token %}

    {# แสดงฟอร์ม login มาตรฐานของ Django #}
    <table>
      <tr>
        <td>{{ form.username.label_tag }}</td>
        <td>{{ form.username }}</td>
      </tr>
      <tr>
        <td>{{ form.password.label_tag }}</td>
        <td>{{ form.password }}</td>
      </tr>
    </table>

    <button type="submit">เข้าสู่ระบบ</button>
    <input type="hidden" name="next" value="{{ next }}"> {# ส่งต่อไปยังหน้าที่พยายามเข้าถึงก่อนหน้า (ถ้ามี) #}
  </form>

  {# (Optional) เพิ่ม Link ไปยังหน้าลืมรหัสผ่าน #}
  <p><a href="{% url 'password_reset' %}">ลืมรหัสผ่าน?</a></p>
  {# (Optional) เพิ่ม Link ไปยังหน้าสมัครสมาชิก ถ้ามี #}
  {# ใต้ฟอร์ม login #}
  <p>ยังไม่มีบัญชี? <a href="{% url 'outfits:register' %}">สมัครสมาชิกที่นี่</a></p> {# <--- เพิ่ม Link นี้ #}
{% endblock %}